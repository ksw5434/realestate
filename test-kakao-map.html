<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오맵 API 테스트</title>
</head>
<body>
    <h1>카카오맵 API 로드 테스트</h1>
    <div id="map" style="width:500px;height:400px;"></div>
    <div id="status"></div>

    <script>
        const API_KEY = '4a736688fb7d6a291925b6f35a7f45aa';
        const statusDiv = document.getElementById('status');

        statusDiv.innerHTML = '<p>스크립트 로드 중...</p>';

        const script = document.createElement('script');
        script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${API_KEY}&autoload=false`;

        script.onload = () => {
            statusDiv.innerHTML = '<p style="color: green;">✓ 스크립트 로드 성공!</p>';

            if (window.kakao && window.kakao.maps) {
                kakao.maps.load(() => {
                    statusDiv.innerHTML += '<p style="color: green;">✓ 카카오맵 초기화 성공!</p>';

                    // 지도 생성 테스트
                    const container = document.getElementById('map');
                    const options = {
                        center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울시청
                        level: 3
                    };

                    const map = new kakao.maps.Map(container, options);
                    statusDiv.innerHTML += '<p style="color: green;">✓ 지도 생성 성공!</p>';
                });
            } else {
                statusDiv.innerHTML += '<p style="color: red;">✗ kakao.maps 객체를 찾을 수 없습니다</p>';
            }
        };

        script.onerror = (error) => {
            statusDiv.innerHTML = '<p style="color: red;">✗ 스크립트 로드 실패!</p>';
            statusDiv.innerHTML += '<p>에러: ' + JSON.stringify(error) + '</p>';
            statusDiv.innerHTML += '<p>스크립트 URL: ' + script.src + '</p>';
            statusDiv.innerHTML += '<p><strong>가능한 원인:</strong></p>';
            statusDiv.innerHTML += '<ul>';
            statusDiv.innerHTML += '<li>API 키가 유효하지 않음</li>';
            statusDiv.innerHTML += '<li>도메인이 카카오 개발자 콘솔에 등록되지 않음</li>';
            statusDiv.innerHTML += '<li>네트워크 문제</li>';
            statusDiv.innerHTML += '</ul>';
        };

        document.head.appendChild(script);
    </script>
</body>
</html>
